- name: Deploy monitoring stack
  hosts: localhost
  tasks:
    - name: Add Helm repos
      shell: |
        helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
        helm repo add grafana https://grafana.github.io/helm-charts
        helm repo update

    - name: Deploy Prometheus
      shell: |
        helm upgrade --install prometheus prometheus-community/prometheus \
          --namespace monitoring --create-namespace

    - name: Deploy Grafana
      shell: |
        helm upgrade --install grafana grafana/grafana \
          --namespace monitoring --create-namespace \
          --set adminPassword=admin123
